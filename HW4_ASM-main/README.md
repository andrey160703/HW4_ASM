# ИДЗ №1 Андрей Гусев БПИ219

# Вариант #25

![Task](images/task.png)





###Критерий №4/10

![4_1](images/4_1.png)

- В проекте это файл `main.cpp`

---
![4_2](images/4_2.png)

- **Производители и потребители** – это парадигма взаимодействующих неравноправных процессов. Одни из процессов «производят» данные, другие их «потребляют». Часто такие процессы организуются в конвейер, через который проходит информация. Каждый процесс конвейера потребляет выход своего предшественника и производит входные данные для своего последователя. 


- Между производителем и потребителем существует однонаправленный поток информации. Такой вид межпроцессного взаимодействия не имеет аналогов в последовательном программировании, поскольку в последовательной программе только один поток управления, в то время как производители и потребители - независимые процессы со своими потоками управления и собственными скоростями выполнения.


- В данной задаче 2 производителя и 2 потребителя: 1 поток (проверяющий булавки на кривизну) - производитель, 2 поток (осуществляющий заточку) - производитель и потребитель одновременно, 3 поток (проверяющий заточку) - потребитель. Входными данными программы являектся число - количество булавок.


---

![4_3](images/4_3.png)

**Ограничения ввода:**

1) На вход подается 1 целое число от 1 до 25 включительно.
2) Управление вводом данных происходит с помощью команд: console(number из командной строки), file, random;
3) При использовании командной строки команды console не существует, вместо нее используется команда number и соответсвенно нужно еще одним аргументом передавать корректное число.

---

---
![4_4](images/4_4.png)

- Сделано

---
![4_5](images/4_5.png)

- Реализован ввод данных из консоли

![4_6](images/4_6.png)

- Сделал.

---

###Критерий №5/10

![5_1](images/5_1.png)

- Сделал

---
![5_2](images/5_2.png)

- Программа моделирует работу 3-х независимых мастеров:
1) Первый мастер проверяет кривизну каждой булавки, и если та не кривая - кладет ее в "ящик" второго мастера.
2) Второй мастер берет очередную булавку из ящика (который заполняет первый мастер) и производит заточку булавки. После заточки второй мастер кладет булавку в другой ящик - предназначенный третьему мастеру.
3) Третий мастер соответственно берет очередную булавку из своего ящика и осуществляет контроль качества булавки.

- Все мастера работают независимо друг от друга, и каждый мастер отдыхает между работой над очередной булавкой.


---
###Критерий №6/10
![6_1](images/6_1.png)

- Структура Pin описывает булавку.

- В программе используется 3 потока: 
1) Проверяет кривизну булавки (с помощью функции rand() мы выясняем кривая или нет), 
не кривые булавки помещаются в q1 - первую очередь, предназначенную для 2 потока. 
2) Производит заточку булавки - берет из очереди q1 булавку - производит заточку и помещает булавку в q2 - очередь, предназначенную для 3 потока.
3) Проверяет качество булавки - берет из очереди q2 булавку и проверяет качество.
- 3 потока работают параллельно друг с другом, 2 мутекса регулируют их работу (корректное обращение к переменным).
---
![6_2](images/6_2.png)

- Сделал

---
![6_3](images/6_3.png)

- Сделал

---

###Критерий №7/10
![7_1](images/7_1.png)

- Реализован файловый ввод вывод.
- Для ввода данных используется файл input.txt
- Для вывода данных используется файл output.txt

---
![7_2](images/7_2.png)

1
![test1](images/test1.png)
2
![test2](images/test2.png)
3
![test3](images/test3.png)
4
![test4](images/test4.png)
---

![7_3](images/7_3.png)

- Результаты работы программы выводятся на экран и записываются в файл.
- Подсказки и замечания пользователю не записываются в файл.
- На 4 скриншоте предыдущего пункта видно.

---
![7_4](images/7_4.png)

- Ввод данных с командной строки поддерживает все виды ввода.

---
![7_5](images/7_5.png)

- Сделал

---


###Критерий №8/10
![8_1](images/8_1.png)

- Есть возможность генерации случайных входных данных.

---
![8_2](images/8_2.png)

1
![random_test1](images/random_test1.png)
2
![random_test2](images/random_test2.png)
3
![random_test3](images/random_test3.png)

---

![8_3](images/8_3.png)

- Ввод данных с командной строки поддерживает все виды ввода.


---
![8_4](images/8_4.png)

- Сделал

---
###Критерий №9/10
![9_1](images/9_1.png)
![9_2](images/9_2.png)

- Если отключить мутексы, то программа может сработать некорректно на любых входных данных: 
работа 2-х потоков зависит от состояния переменных q1 и q2 (переменная checkedPins не ломает программу при отключении мутексов),
- При отключенных мутексах может возникнуть следующая ситуация: второй поток взял последнюю булавку из q1 - она стало пустой, но еще не успела положить ее в q2 - а она может быть тоже пустой;
В этом случае третий поток не обработает последнюю булавку.

---
![9_3](images/9_3.png)

- Сделал
